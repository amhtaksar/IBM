<html>
<head>

<title>Gator Desktop</title>

<link href="style/gator.css" rel="stylesheet">
<link href="style/desktop.css" rel="stylesheet">
<link href="style/header.css" rel="stylesheet">
<link href="style/tabs.css" rel="stylesheet">
<link href="style/chart.css" rel="stylesheet">
<link href="style/keywords.css" rel="stylesheet">
<link href="style/navigation.css" rel="stylesheet">

</head>
<body>
  
<!-- Team navigation -->
<nav>
  <div class="selected blog"></div>
</nav>

<header>
  <h1>Gator Dashboard</h1>
</header>

<div id="tabs">
  <button class="blog">
    <div class="blog-dark"></div>
    <div>
      <p>Blog</p>
      <p>-</p>
    </div>
  </button>
  <button class="twitter">
    <div class="twitter-dark"></div>
    <div>
      <p>Twitter</p>
      <p>-</p>
    </div>
  </button>      
  <button class="video">
    <div class="video-dark"></div>
    <div>
      <p>YouTube</p>
      <p>-</p>
    </div>
  </button>            
  <button class="github">
    <div class="github-dark"></div>
    <div>
      <p>GitHub</p>
      <p>-</p>
    </div>
  </button>                          
  <button class="answers">
    <div class="answers-dark"></div>
    <div>
      <p>Answers</p>
      <p>-</p>
    </div>
  </button>                
</div>

<div id="chart"></div>

<div id="statistics">
  <div id="media" class="blog"></div>
  <div id="category" class="twitter"></div>
  <div id="keywords" class="video">
    <p>Keywords</p>
    <div class="item">
      <p>stuff</p>
      <p>12</p>
      <p>count</p>
    </div>
    <div class="item">
      <p>stuff</p>
      <p>12</p>
      <p>count</p>
    </div>   
    <div class="item">
      <p>stuff</p>
      <p>12</p>
      <p>count</p>
    </div>
    <div class="item">
      <p>stuff</p>
      <p>12</p>
      <p>count</p>
    </div>   
    <div class="item">
      <p>stuff</p>
      <p>12</p>
      <p>count</p>
    </div>
    <div class="item">
      <p>stuff</p>
      <p>12</p>
      <p>count</p>
    </div>   
    <div class="item">
      <p>stuff</p>
      <p>12</p>
      <p>count</p>
    </div>       
    <div class="item">
      <p>stuff</p>
      <p>12</p>
      <p>count</p>
    </div>           
  </div>
</div>

<script src="script/observer.js"></script>
<script src="script/organization.js"></script>
<script src="script/tabs.js"></script>

<script>
class Gator {
  constructor() {
    this.organization = new Organization();
    this.organization.addEventListener( Organization.ADVOCATE_CLICK, ( evt ) => this.doAdvocateClick( evt ) );    
    this.organization.addEventListener( Organization.TEAM_CLICK, ( evt ) => this.doTeamClick( evt ) );    

    this.tabs = new Tabs();
  }

  doAdvocateClick( evt ) {
    console.log( `Advocate: ${evt.id}` );

    this.tabs.clear();

    fetch( `${Gator.GET_ADVOCATE_SUMMARY}?id=${evt.id}` )
    .then( ( response ) => response.json() )
    .then( ( data ) => {
      this.tabs.count = {
        blog: data.blog.posts.length,
        github: data.github.events.length,
        so: data.so.answers.length,
        twitter: data.twitter.status.length,
        youtube: data.youtube.videos.length
      };

      console.log( data );  
    } );
  }

  doTeamClick( evt ) {
    console.log( `Team: ${evt.id}` );

    this.tabs.clear();

    fetch( `${Gator.GET_TEAM_SUMMARY}?id=${evt.id}` )
    .then( ( response ) => response.json() )
    .then( ( data ) => {
      this.tabs.count = {
        blog: data.blog.posts.length,
        github: data.github.events.length,
        so: data.so.answers.length,
        twitter: data.twitter.posts.length,
        youtube: data.youtube.posts.length
      };

      console.log( data );  
    } );    
  }
}

Gator.GET_ADVOCATE_SUMMARY = 'https://openwhisk.ng.bluemix.net/api/v1/web/krhoyt%40us.ibm.com_dev/gator/get.advocate.summary';
Gator.GET_TEAM_SUMMARY = 'https://openwhisk.ng.bluemix.net/api/v1/web/krhoyt%40us.ibm.com_dev/gator/get.team.summary';

const app = new Gator();
</script>

</body>
</html>
